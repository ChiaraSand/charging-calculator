<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Charging Speed Calculation Example</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .example {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .result {
        background: #e8f5e8;
        padding: 15px;
        border-radius: 6px;
        margin: 10px 0;
      }
      .comparison {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
      }
      .method {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 6px;
      }
      code {
        background: #f1f3f4;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: "Courier New", monospace;
      }
    </style>
  </head>
  <body>
    <h1>Charging Speed Calculation Example</h1>

    <div class="example">
      <h2>Renault 5 E-Tech 52 kWh - Real Charging Data</h2>
      <p>
        This example shows how the charging speed calculation works using
        real-world data from the Renault 5 E-Tech.
      </p>

      <h3>Scenario</h3>
      <ul>
        <li><strong>Vehicle:</strong> Renault 5 E-Tech 52 kWh</li>
        <li><strong>Battery Level:</strong> 20% â†’ 80% (60% charge)</li>
        <li><strong>Charger Power:</strong> 150 kW</li>
        <li><strong>Energy Needed:</strong> 31.2 kWh</li>
      </ul>

      <div class="comparison">
        <div class="method">
          <h4>Linear Calculation (Old Method)</h4>
          <p>Assumes constant charging power:</p>
          <code>Time = Energy / Power = 31.2 kWh / 150 kW = 12.5 minutes</code>
          <div class="result">
            <strong>Result: 12.5 minutes</strong>
          </div>
        </div>

        <div class="method">
          <h4>Vehicle-Specific Calculation (New Method)</h4>
          <p>Uses real charging curve data:</p>
          <ul>
            <li>20-30%: ~100 kW average</li>
            <li>30-50%: ~85 kW average</li>
            <li>50-70%: ~65 kW average</li>
            <li>70-80%: ~45 kW average</li>
          </ul>
          <div class="result">
            <strong>Result: ~25 minutes</strong>
          </div>
        </div>
      </div>

      <h3>Why the Difference?</h3>
      <p>
        Electric vehicles don't charge at constant power. The charging speed
        decreases as the battery fills up due to:
      </p>
      <ul>
        <li>
          <strong>Battery Chemistry:</strong> Higher resistance at higher SoC
        </li>
        <li>
          <strong>Thermal Management:</strong> Reduced power to prevent
          overheating
        </li>
        <li>
          <strong>Battery Protection:</strong> Slower charging to preserve
          battery life
        </li>
      </ul>
    </div>

    <div class="example">
      <h2>Charging Power Over Time</h2>
      <p>
        Here's how the charging power changes during a typical charging session:
      </p>

      <table style="width: 100%; border-collapse: collapse; margin: 20px 0">
        <thead>
          <tr style="background: #f8f9fa">
            <th style="padding: 10px; border: 1px solid #ddd">Battery Level</th>
            <th style="padding: 10px; border: 1px solid #ddd">
              Charging Power
            </th>
            <th style="padding: 10px; border: 1px solid #ddd">Time for 1%</th>
            <th style="padding: 10px; border: 1px solid #ddd">
              Cumulative Time
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd">20%</td>
            <td style="padding: 10px; border: 1px solid #ddd">100.9 kW</td>
            <td style="padding: 10px; border: 1px solid #ddd">0.31 min</td>
            <td style="padding: 10px; border: 1px solid #ddd">0.31 min</td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd">30%</td>
            <td style="padding: 10px; border: 1px solid #ddd">96.1 kW</td>
            <td style="padding: 10px; border: 1px solid #ddd">0.32 min</td>
            <td style="padding: 10px; border: 1px solid #ddd">3.2 min</td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd">50%</td>
            <td style="padding: 10px; border: 1px solid #ddd">75.9 kW</td>
            <td style="padding: 10px; border: 1px solid #ddd">0.41 min</td>
            <td style="padding: 10px; border: 1px solid #ddd">11.2 min</td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd">70%</td>
            <td style="padding: 10px; border: 1px solid #ddd">59.7 kW</td>
            <td style="padding: 10px; border: 1px solid #ddd">0.52 min</td>
            <td style="padding: 10px; border: 1px solid #ddd">21.2 min</td>
          </tr>
          <tr>
            <td style="padding: 10px; border: 1px solid #ddd">80%</td>
            <td style="padding: 10px; border: 1px solid #ddd">41.9 kW</td>
            <td style="padding: 10px; border: 1px solid #ddd">0.74 min</td>
            <td style="padding: 10px; border: 1px solid #ddd">28.6 min</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="example">
      <h2>Benefits of Vehicle-Specific Calculation</h2>

      <h3>1. Accuracy</h3>
      <p>Real-world charging behavior instead of theoretical calculations.</p>

      <h3>2. Cost Estimation</h3>
      <p>More accurate energy consumption leads to better cost estimates.</p>

      <h3>3. Planning</h3>
      <p>Better time estimates help with trip planning and charging stops.</p>

      <h3>4. Comparison</h3>
      <p>Compare different vehicles and their charging characteristics.</p>
    </div>

    <div class="example">
      <h2>How to Use in the Calculator</h2>
      <ol>
        <li>Select your vehicle from the dropdown menu</li>
        <li>Enter your current battery level (e.g., 20%)</li>
        <li>Set your target charge level (e.g., 80%)</li>
        <li>Choose the available charging power</li>
        <li>View the realistic charging time estimate</li>
        <li>See detailed charging speed information</li>
      </ol>

      <p>
        The calculator will automatically use the most appropriate charging
        curve for your selected vehicle and provide accurate time estimates
        based on real-world data.
      </p>
    </div>

    <script>
      // Simple demonstration of the charging calculation
      console.info("Charging Speed Calculation Example");
      console.info("==================================");

      // Simulate the calculation
      const vehicleData = {
        20: 100.9,
        30: 96.1,
        50: 75.9,
        70: 59.7,
        80: 41.9,
      };

      const batteryCapacity = 52; // kWh
      const currentLevel = 20;
      const targetLevel = 80;
      const chargerPower = 150; // kW

      let totalTime = 0;
      let totalEnergy = 0;

      console.info("Charging from 20% to 80% on 150kW charger:");
      console.info("Battery Level | Power Used | Time for 1% | Cumulative");
      console.info("-------------|------------|-------------|----------");

      for (let level = currentLevel; level < targetLevel; level += 10) {
        const power = Math.min(vehicleData[level], chargerPower);
        const energyFor10Percent = (batteryCapacity * 10) / 100;
        const timeFor10Percent = (energyFor10Percent / power) * 60;

        totalTime += timeFor10Percent;
        totalEnergy += energyFor10Percent;

        console.info(
          `${level}%         | ${power.toFixed(
            1
          )} kW    | ${timeFor10Percent.toFixed(
            1
          )} min     | ${totalTime.toFixed(1)} min`
        );
      }

      console.info(`\nTotal Energy: ${totalEnergy.toFixed(1)} kWh`);
      console.info(`Total Time: ${totalTime.toFixed(1)} minutes`);
      console.info(
        `Average Power: ${(totalEnergy / (totalTime / 60)).toFixed(1)} kW`
      );
    </script>
  </body>
</html>
